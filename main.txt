-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–æ–≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
local teleporting = false
local connection = nil
local checkTeam = true -- true = —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É, false = –≤—Å–µ—Ö

-- –§—É–Ω–∫—Ü–∏—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
local function teleportPlayers()
    if not LocalPlayer.Character then return end
    
    local root = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    local targetPos = root.Position
    local localTeam = LocalPlayer.Team
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–º–∞–Ω–¥—É –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞
            if checkTeam then
                if player.Team ~= localTeam then
                    continue -- –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–∫–æ–≤ –∏–∑ –¥—Ä—É–≥–∏—Ö –∫–æ–º–∞–Ω–¥
                end
            end
            
            local char = player.Character
            local hrp = char:FindFirstChild("HumanoidRootPart")
            if hrp then
                -- –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Å –Ω–µ–±–æ–ª—å—à–∏–º —Å–ª—É—á–∞–π–Ω—ã–º —Å–º–µ—â–µ–Ω–∏–µ–º
                hrp.CFrame = CFrame.new(targetPos + Vector3.new(
                    math.random(-4, 4),
                    3,
                    math.random(-4, 4)
                ))
            end
        end
    end
end

-- –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞
local function toggleTeleport()
    teleporting = not teleporting
    
    if teleporting then
        -- –í–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—é
        connection = RunService.Heartbeat:Connect(teleportPlayers)
        print("üü¢ –ê–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –í–ö–õ–Æ–ß–ï–ù–ê")
        if checkTeam then
            print("üìã –†–µ–∂–∏–º: —Ç–æ–ª—å–∫–æ –º–æ—è –∫–æ–º–∞–Ω–¥–∞")
        else
            print("üåç –†–µ–∂–∏–º: –≤—Å–µ –∏–≥—Ä–æ–∫–∏")
        end
    else
        -- –í—ã–∫–ª—é—á–∞–µ–º
        if connection then
            connection:Disconnect()
            connection = nil
        end
        print("üî¥ –ê–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –í–´–ö–õ–Æ–ß–ï–ù–ê")
    end
end

-- –§—É–Ω–∫—Ü–∏—è —Å–º–µ–Ω—ã —Ä–µ–∂–∏–º–∞ –∫–æ–º–∞–Ω–¥—ã
local function toggleTeamMode()
    checkTeam = not checkTeam
    if checkTeam then
        print("üìã –†–µ–∂–∏–º: —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –º–æ—é –∫–æ–º–∞–Ω–¥—É")
    else
        print("üåç –†–µ–∂–∏–º: —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –í–°–ï–• –∏–≥—Ä–æ–∫–æ–≤")
    end
end

-- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == Enum.KeyCode.L then
        toggleTeleport()
    elseif input.KeyCode == Enum.KeyCode.T then
        toggleTeamMode()
    end
end)

-- –°–æ–∑–¥–∞–µ–º GUI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
local function createGUI()
    local ScreenGui = Instance.new("ScreenGui")
    local Frame = Instance.new("Frame")
    local StatusText = Instance.new("TextLabel")
    local ModeText = Instance.new("TextLabel")
    local InfoText = Instance.new("TextLabel")
    
    ScreenGui.Parent = game.CoreGui
    ScreenGui.Name = "TeleportGUI"
    
    Frame.Parent = ScreenGui
    Frame.Size = UDim2.new(0, 250, 0, 120)
    Frame.Position = UDim2.new(0, 10, 0, 10)
    Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Frame.BackgroundTransparency = 0.3
    Frame.BorderSizePixel = 0
    
    StatusText.Parent = Frame
    StatusText.Size = UDim2.new(1, 0, 0, 30)
    StatusText.Position = UDim2.new(0, 0, 0, 10)
    StatusText.BackgroundTransparency = 1
    StatusText.Text = "–°—Ç–∞—Ç—É—Å: üî¥ –í–´–ö–õ"
    StatusText.TextColor3 = Color3.fromRGB(255, 100, 100)
    StatusText.Font = Enum.Font.SourceSansBold
    StatusText.TextSize = 18
    StatusText.TextXAlignment = Enum.TextXAlignment.Left
    StatusText.PaddingLeft = UDim.new(0, 10)
    
    ModeText.Parent = Frame
    ModeText.Size = UDim2.new(1, 0, 0, 30)
    ModeText.Position = UDim2.new(0, 0, 0, 40)
    ModeText.BackgroundTransparency = 1
    ModeText.Text = "–†–µ–∂–∏–º: –ú–æ—è –∫–æ–º–∞–Ω–¥–∞"
    ModeText.TextColor3 = Color3.fromRGB(200, 200, 200)
    ModeText.Font = Enum.Font.SourceSans
    ModeText.TextSize = 16
    ModeText.TextXAlignment = Enum.TextXAlignment.Left
    ModeText.PaddingLeft = UDim.new(0, 10)
    
    InfoText.Parent = Frame
    InfoText.Size = UDim2.new(1, 0, 0, 40)
    InfoText.Position = UDim2.new(0, 0, 0, 70)
    InfoText.BackgroundTransparency = 1
    InfoText.Text = "L - –≤–∫–ª/–≤—ã–∫–ª\nT - —Å–º–µ–Ω–∏—Ç—å —Ä–µ–∂–∏–º"
    InfoText.TextColor3 = Color3.fromRGB(150, 150, 150)
    InfoText.Font = Enum.Font.SourceSans
    InfoText.TextSize = 14
    InfoText.TextXAlignment = Enum.TextXAlignment.Left
    InfoText.PaddingLeft = UDim.new(0, 10)
    
    -- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è GUI
    local function updateGUI()
        if teleporting then
            StatusText.Text = "–°—Ç–∞—Ç—É—Å: üü¢ –í–ö–õ"
            StatusText.TextColor3 = Color3.fromRGB(100, 255, 100)
        else
            StatusText.Text = "–°—Ç–∞—Ç—É—Å: üî¥ –í–´–ö–õ"
            StatusText.TextColor3 = Color3.fromRGB(255, 100, 100)
        end
        
        if checkTeam then
            ModeText.Text = "–†–µ–∂–∏–º: –ú–æ—è –∫–æ–º–∞–Ω–¥–∞"
        else
            ModeText.Text = "–†–µ–∂–∏–º: –í—Å–µ –∏–≥—Ä–æ–∫–∏"
        end
    end
    
    -- –û–±–Ω–æ–≤–ª—è–µ–º GUI –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
    game:GetService("RunService").Heartbeat:Connect(updateGUI)
    
    return ScreenGui
end

-- –°–æ–∑–¥–∞–µ–º GUI
createGUI()

-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
print([[
üéÆ –°–∫—Ä–∏–ø—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω!

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
‚Ä¢ L - –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—é
‚Ä¢ T - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º (–º–æ—è –∫–æ–º–∞–Ω–¥–∞/–≤—Å–µ –∏–≥—Ä–æ–∫–∏)

–¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º: ]] .. (checkTeam and "–¢–æ–ª—å–∫–æ –º–æ—è –∫–æ–º–∞–Ω–¥–∞" or "–í—Å–µ –∏–≥—Ä–æ–∫–∏"))

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞
getgenv().StopTeleportScript = function()
    if connection then
        connection:Disconnect()
        connection = nil
    end
    teleporting = false
    
    -- –£–¥–∞–ª—è–µ–º GUI
    if game.CoreGui:FindFirstChild("TeleportGUI") then
        game.CoreGui.TeleportGUI:Destroy()
    end
    
    print("–°–∫—Ä–∏–ø—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
end

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –≤—ã–≥—Ä—É–∑–∫–µ
game:GetService("Players").PlayerRemoving:Connect(function(player)
    if player == LocalPlayer then
        getgenv().StopTeleportScript()
    end
end)
